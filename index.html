<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>HCHS Latin Club Connections Game</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Roboto;
      text-align: center;
      padding: 20px;
    }

    .bar {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      color: white;
    }

    .yellow { background-color: #f5e07e; }
    .green { background-color: #a7c268; }
    .blue { background-color: #b4c3eb; }
    .purple { background-color: #b283c1; }

    .category-title {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      max-width: 600px;
      margin: 20px auto;
    }

    .tile {
      padding: 15px;
      background-color: #eaeaea;
      color: #000000
      cursor: pointer;
      border-radius: 8px;
      user-select: none;
    }

    .tile.selected {
      background-color: #585858;
      color: #ffffff
    }

    .feedback {
      margin: 15px;
      font-size: 1.1em;
      font-weight: bold;
    }

    .mistakes {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
    }

    .circle {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background-color: gray;
    }

    .circle.used {
      background-color: lightgray;
    }

    button {
      padding: 10px 20px;
      margin-top: 15px;
      font-family: Georgia;
      font-size: 10px;
    }
  </style>
</head>
<body>

  <!-- Interface -->
  <div class="feedback" id="feedback">Create four groups of four!</div> <!-- Feedback -->
  <div id="solved-categories"></div> <!-- Solved Categories -->
  <div class="grid" id="grid"></div> <!-- Grid -->
  <div class="mistakes" id="mistake-tracker"></div> <!-- Mistakes -->
  <button onclick="submitGuess()">Submit</button> <!-- Submit -->
  

  <script>
    const puzzleWords = [
      "Commodus", "Valerius","Sextus", "Domitian", "Aelius", "Plautius", "Quintus", "Grumio", "Secundus", "Nero", "Decimus", "Julius", "Salvius", "Elagabalus", "Rufus", "Caligula"
    ];

    const categories = [
      { name: "Ordinal Praenomina", words: ["Secundus", "Quintus", "Sextus", "Decimus"], color: "yellow" },
      { name: "Characters from the Cambridge Latin Course", words: ["Rufus", "Salvius", "Grumio", "Domitian"], color: "green" },
      { name: "Mad Emperors Club", words: ["Caligula", "Nero", "Commodus", "Elagabalus"], color: "blue" },
      { name: "Masculine Forms of Claudius’ Wives’ Common Names", words: ["Plautius", "Aelius", "Valerius", "Julius"], color: "purple" }
    ];

    let selected = [];
    let found = [];
    let mistakes = 0;
    const maxMistakes = 10;

    const gridDiv = document.getElementById("grid");
    const feedback = document.getElementById("feedback");
    const solvedDiv = document.getElementById("solved-categories");
    const mistakeTracker = document.getElementById("mistake-tracker");

    function game() {
      puzzleWords.forEach(word => {
        const div = document.createElement("div");
        div.className = "tile";
        div.textContent = word;
        div.onclick = () => toggleSelect(div, word);
        gridDiv.appendChild(div);
      });

      for (let i = 0; i < maxMistakes; i++) {
        const circle = document.createElement("div");
        circle.className = "circle";
        mistakeTracker.appendChild(circle);
      }
    }

    function toggleSelect(tile, word) {
      if (tile.classList.contains("selected")) {
        tile.classList.remove("selected");
        selected = selected.filter(w => w !== word);
      } else if (selected.length < 4) {
        tile.classList.add("selected");
        selected.push(word);
      }
    }

    function submitGuess() {
      if (selected.length !== 4) {
        feedback.textContent = "Select exactly four words.";
        return;
      }

      const matchedCategory = categories.find(cat =>
        cat.words.every(w => selected.includes(w)) &&
        !found.includes(cat.name)
      );

      if (matchedCategory) {
        // Add solved category to top
        found.push(matchedCategory.name);
        const bar = document.createElement("div");
        bar.className = `bar ${matchedCategory.color}`;

        const title = document.createElement("div");
        title.className = "category-title";
        title.textContent = matchedCategory.name;
        solvedDiv.appendChild(title);

        matchedCategory.words.forEach(w => {
          const wordDiv = document.createElement("div");
          wordDiv.textContent = w;
          bar.appendChild(wordDiv);
        });

        solvedDiv.appendChild(bar);

        // Remove from grid
        document.querySelectorAll(".tile").forEach(tile => {
          if (selected.includes(tile.textContent)) {
            tile.remove();
          }
        });

      } else {
        // One away?
        const oneAway = categories.find(cat =>
          selected.filter(w => cat.words.includes(w)).length === 3 &&
          !found.includes(cat.name)
        );

        if (oneAway) {
          feedback.textContent = "Almost! You're one away.";
        } else {
          feedback.textContent = "Incorrect group.";
        }
          mistakeTracker.children[mistakes].classList.add("used");
          mistakes++;
      }

      selected = [];
      document.querySelectorAll(".tile").forEach(tile => tile.classList.remove("selected"));

      if (mistakes >= maxMistakes) {
        feedback.textContent = "Next Time!";
        revealRemainingAnswers();
      }

      if (found.length === 4) {
        if (mistakes === 0) {
           feedback.textContent = "Perfect!";
        } else if (mistakes >= 1 && mistakes <= 2) {
           feedback.textContent = "Excellent!";
        } else if (mistakes >= 3 && mistakes <= 4) {
           feedback.textContent = "Great!";
        } else if (mistakes >= 5 && mistakes <= 6) {
           feedback.textContent = "Solid!";
        } else if (mistakes >= 7 && mistakes <= 8) {
           feedback.textContent = "Good!";
        } else if (mistakes === 9) {
           feedback.textContent = "Phew!";
        }
      }
    }

    function revealRemainingAnswers() {
      gridDiv.innerHTML = "";
      categories.forEach(cat => {
        if (!found.includes(cat.name)) {
          const title = document.createElement("div");
          title.className = "category-title";
          title.textContent = cat.name;
          solvedDiv.appendChild(title);

          const bar = document.createElement("div");
          bar.className = `bar ${cat.color}`;
          cat.words.forEach(w => {
            const wordDiv = document.createElement("div");
            wordDiv.textContent = w;
            bar.appendChild(wordDiv);
          });
          solvedDiv.appendChild(bar);
        }
      });
    }

    game();
  </script>

</body>
</html>
